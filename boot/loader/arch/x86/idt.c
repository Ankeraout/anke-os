#include <stdint.h>

#include "arch/x86/asm.h"
#include "arch/x86/idt.h"
#include "arch/x86/irq.h"

#define C_INTERRUPT_GATE 0x0e
#define C_TRAP_GATE 0x0f

struct ts_idtEntry {
    uint16_t m_offsetLow;
    uint16_t m_segment;
    uint8_t m_reserved;
    uint8_t m_gateType : 4;
    uint8_t m_zero : 1;
    uint8_t m_dpl : 2;
    uint8_t m_present : 1;
    uint16_t m_offsetHigh;
};

struct ts_idtr {
    uint16_t m_limit;
    uint32_t m_base;
} __attribute__((packed));

static void idtInitEntry(
    struct ts_idtEntry *p_entry,
    uint32_t p_offset,
    uint16_t p_segment,
    uint8_t p_gateType
);

extern void isrException0(void);
extern void isrException1(void);
extern void isrException2(void);
extern void isrException3(void);
extern void isrException4(void);
extern void isrException5(void);
extern void isrException6(void);
extern void isrException7(void);
extern void isrException8(void);
extern void isrException9(void);
extern void isrException10(void);
extern void isrException11(void);
extern void isrException12(void);
extern void isrException13(void);
extern void isrException14(void);
extern void isrException15(void);
extern void isrException16(void);
extern void isrException17(void);
extern void isrException18(void);
extern void isrException19(void);
extern void isrException20(void);
extern void isrException21(void);
extern void isrException22(void);
extern void isrException23(void);
extern void isrException24(void);
extern void isrException25(void);
extern void isrException26(void);
extern void isrException27(void);
extern void isrException28(void);
extern void isrException29(void);
extern void isrException30(void);
extern void isrException31(void);
extern void isrIrq32(void);
extern void isrIrq33(void);
extern void isrIrq34(void);
extern void isrIrq35(void);
extern void isrIrq36(void);
extern void isrIrq37(void);
extern void isrIrq38(void);
extern void isrIrq39(void);
extern void isrIrq40(void);
extern void isrIrq41(void);
extern void isrIrq42(void);
extern void isrIrq43(void);
extern void isrIrq44(void);
extern void isrIrq45(void);
extern void isrIrq46(void);
extern void isrIrq47(void);
extern void isrIrq48(void);
extern void isrIrq49(void);
extern void isrIrq50(void);
extern void isrIrq51(void);
extern void isrIrq52(void);
extern void isrIrq53(void);
extern void isrIrq54(void);
extern void isrIrq55(void);
extern void isrIrq56(void);
extern void isrIrq57(void);
extern void isrIrq58(void);
extern void isrIrq59(void);
extern void isrIrq60(void);
extern void isrIrq61(void);
extern void isrIrq62(void);
extern void isrIrq63(void);
extern void isrIrq64(void);
extern void isrIrq65(void);
extern void isrIrq66(void);
extern void isrIrq67(void);
extern void isrIrq68(void);
extern void isrIrq69(void);
extern void isrIrq70(void);
extern void isrIrq71(void);
extern void isrIrq72(void);
extern void isrIrq73(void);
extern void isrIrq74(void);
extern void isrIrq75(void);
extern void isrIrq76(void);
extern void isrIrq77(void);
extern void isrIrq78(void);
extern void isrIrq79(void);
extern void isrIrq80(void);
extern void isrIrq81(void);
extern void isrIrq82(void);
extern void isrIrq83(void);
extern void isrIrq84(void);
extern void isrIrq85(void);
extern void isrIrq86(void);
extern void isrIrq87(void);
extern void isrIrq88(void);
extern void isrIrq89(void);
extern void isrIrq90(void);
extern void isrIrq91(void);
extern void isrIrq92(void);
extern void isrIrq93(void);
extern void isrIrq94(void);
extern void isrIrq95(void);
extern void isrIrq96(void);
extern void isrIrq97(void);
extern void isrIrq98(void);
extern void isrIrq99(void);
extern void isrIrq100(void);
extern void isrIrq101(void);
extern void isrIrq102(void);
extern void isrIrq103(void);
extern void isrIrq104(void);
extern void isrIrq105(void);
extern void isrIrq106(void);
extern void isrIrq107(void);
extern void isrIrq108(void);
extern void isrIrq109(void);
extern void isrIrq110(void);
extern void isrIrq111(void);
extern void isrIrq112(void);
extern void isrIrq113(void);
extern void isrIrq114(void);
extern void isrIrq115(void);
extern void isrIrq116(void);
extern void isrIrq117(void);
extern void isrIrq118(void);
extern void isrIrq119(void);
extern void isrIrq120(void);
extern void isrIrq121(void);
extern void isrIrq122(void);
extern void isrIrq123(void);
extern void isrIrq124(void);
extern void isrIrq125(void);
extern void isrIrq126(void);
extern void isrIrq127(void);
extern void isrIrq128(void);
extern void isrIrq129(void);
extern void isrIrq130(void);
extern void isrIrq131(void);
extern void isrIrq132(void);
extern void isrIrq133(void);
extern void isrIrq134(void);
extern void isrIrq135(void);
extern void isrIrq136(void);
extern void isrIrq137(void);
extern void isrIrq138(void);
extern void isrIrq139(void);
extern void isrIrq140(void);
extern void isrIrq141(void);
extern void isrIrq142(void);
extern void isrIrq143(void);
extern void isrIrq144(void);
extern void isrIrq145(void);
extern void isrIrq146(void);
extern void isrIrq147(void);
extern void isrIrq148(void);
extern void isrIrq149(void);
extern void isrIrq150(void);
extern void isrIrq151(void);
extern void isrIrq152(void);
extern void isrIrq153(void);
extern void isrIrq154(void);
extern void isrIrq155(void);
extern void isrIrq156(void);
extern void isrIrq157(void);
extern void isrIrq158(void);
extern void isrIrq159(void);
extern void isrIrq160(void);
extern void isrIrq161(void);
extern void isrIrq162(void);
extern void isrIrq163(void);
extern void isrIrq164(void);
extern void isrIrq165(void);
extern void isrIrq166(void);
extern void isrIrq167(void);
extern void isrIrq168(void);
extern void isrIrq169(void);
extern void isrIrq170(void);
extern void isrIrq171(void);
extern void isrIrq172(void);
extern void isrIrq173(void);
extern void isrIrq174(void);
extern void isrIrq175(void);
extern void isrIrq176(void);
extern void isrIrq177(void);
extern void isrIrq178(void);
extern void isrIrq179(void);
extern void isrIrq180(void);
extern void isrIrq181(void);
extern void isrIrq182(void);
extern void isrIrq183(void);
extern void isrIrq184(void);
extern void isrIrq185(void);
extern void isrIrq186(void);
extern void isrIrq187(void);
extern void isrIrq188(void);
extern void isrIrq189(void);
extern void isrIrq190(void);
extern void isrIrq191(void);
extern void isrIrq192(void);
extern void isrIrq193(void);
extern void isrIrq194(void);
extern void isrIrq195(void);
extern void isrIrq196(void);
extern void isrIrq197(void);
extern void isrIrq198(void);
extern void isrIrq199(void);
extern void isrIrq200(void);
extern void isrIrq201(void);
extern void isrIrq202(void);
extern void isrIrq203(void);
extern void isrIrq204(void);
extern void isrIrq205(void);
extern void isrIrq206(void);
extern void isrIrq207(void);
extern void isrIrq208(void);
extern void isrIrq209(void);
extern void isrIrq210(void);
extern void isrIrq211(void);
extern void isrIrq212(void);
extern void isrIrq213(void);
extern void isrIrq214(void);
extern void isrIrq215(void);
extern void isrIrq216(void);
extern void isrIrq217(void);
extern void isrIrq218(void);
extern void isrIrq219(void);
extern void isrIrq220(void);
extern void isrIrq221(void);
extern void isrIrq222(void);
extern void isrIrq223(void);
extern void isrIrq224(void);
extern void isrIrq225(void);
extern void isrIrq226(void);
extern void isrIrq227(void);
extern void isrIrq228(void);
extern void isrIrq229(void);
extern void isrIrq230(void);
extern void isrIrq231(void);
extern void isrIrq232(void);
extern void isrIrq233(void);
extern void isrIrq234(void);
extern void isrIrq235(void);
extern void isrIrq236(void);
extern void isrIrq237(void);
extern void isrIrq238(void);
extern void isrIrq239(void);
extern void isrIrq240(void);
extern void isrIrq241(void);
extern void isrIrq242(void);
extern void isrIrq243(void);
extern void isrIrq244(void);
extern void isrIrq245(void);
extern void isrIrq246(void);
extern void isrIrq247(void);
extern void isrIrq248(void);
extern void isrIrq249(void);
extern void isrIrq250(void);
extern void isrIrq251(void);
extern void isrIrq252(void);
extern void isrIrq253(void);
extern void isrIrq254(void);
extern void isrIrq255(void);

static struct ts_idtEntry s_idt[C_INT_COUNT];

void idtInit(void) {
    idtInitEntry(&s_idt[0], (uint32_t)isrException0, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[1], (uint32_t)isrException1, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[2], (uint32_t)isrException2, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[3], (uint32_t)isrException3, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[4], (uint32_t)isrException4, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[5], (uint32_t)isrException5, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[6], (uint32_t)isrException6, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[7], (uint32_t)isrException7, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[8], (uint32_t)isrException8, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[9], (uint32_t)isrException9, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[10], (uint32_t)isrException10, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[11], (uint32_t)isrException11, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[12], (uint32_t)isrException12, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[13], (uint32_t)isrException13, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[14], (uint32_t)isrException14, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[15], (uint32_t)isrException15, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[16], (uint32_t)isrException16, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[17], (uint32_t)isrException17, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[18], (uint32_t)isrException18, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[19], (uint32_t)isrException19, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[20], (uint32_t)isrException20, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[21], (uint32_t)isrException21, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[22], (uint32_t)isrException22, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[23], (uint32_t)isrException23, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[24], (uint32_t)isrException24, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[25], (uint32_t)isrException25, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[26], (uint32_t)isrException26, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[27], (uint32_t)isrException27, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[28], (uint32_t)isrException28, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[29], (uint32_t)isrException29, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[30], (uint32_t)isrException30, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[31], (uint32_t)isrException31, 0x08, C_TRAP_GATE);
    idtInitEntry(&s_idt[32], (uint32_t)isrIrq32, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[33], (uint32_t)isrIrq33, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[34], (uint32_t)isrIrq34, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[35], (uint32_t)isrIrq35, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[36], (uint32_t)isrIrq36, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[37], (uint32_t)isrIrq37, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[38], (uint32_t)isrIrq38, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[39], (uint32_t)isrIrq39, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[40], (uint32_t)isrIrq40, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[41], (uint32_t)isrIrq41, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[42], (uint32_t)isrIrq42, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[43], (uint32_t)isrIrq43, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[44], (uint32_t)isrIrq44, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[45], (uint32_t)isrIrq45, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[46], (uint32_t)isrIrq46, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[47], (uint32_t)isrIrq47, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[48], (uint32_t)isrIrq48, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[49], (uint32_t)isrIrq49, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[50], (uint32_t)isrIrq50, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[51], (uint32_t)isrIrq51, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[52], (uint32_t)isrIrq52, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[53], (uint32_t)isrIrq53, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[54], (uint32_t)isrIrq54, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[55], (uint32_t)isrIrq55, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[56], (uint32_t)isrIrq56, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[57], (uint32_t)isrIrq57, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[58], (uint32_t)isrIrq58, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[59], (uint32_t)isrIrq59, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[60], (uint32_t)isrIrq60, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[61], (uint32_t)isrIrq61, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[62], (uint32_t)isrIrq62, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[63], (uint32_t)isrIrq63, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[64], (uint32_t)isrIrq64, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[65], (uint32_t)isrIrq65, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[66], (uint32_t)isrIrq66, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[67], (uint32_t)isrIrq67, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[68], (uint32_t)isrIrq68, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[69], (uint32_t)isrIrq69, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[70], (uint32_t)isrIrq70, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[71], (uint32_t)isrIrq71, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[72], (uint32_t)isrIrq72, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[73], (uint32_t)isrIrq73, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[74], (uint32_t)isrIrq74, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[75], (uint32_t)isrIrq75, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[76], (uint32_t)isrIrq76, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[77], (uint32_t)isrIrq77, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[78], (uint32_t)isrIrq78, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[79], (uint32_t)isrIrq79, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[80], (uint32_t)isrIrq80, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[81], (uint32_t)isrIrq81, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[82], (uint32_t)isrIrq82, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[83], (uint32_t)isrIrq83, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[84], (uint32_t)isrIrq84, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[85], (uint32_t)isrIrq85, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[86], (uint32_t)isrIrq86, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[87], (uint32_t)isrIrq87, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[88], (uint32_t)isrIrq88, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[89], (uint32_t)isrIrq89, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[90], (uint32_t)isrIrq90, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[91], (uint32_t)isrIrq91, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[92], (uint32_t)isrIrq92, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[93], (uint32_t)isrIrq93, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[94], (uint32_t)isrIrq94, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[95], (uint32_t)isrIrq95, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[96], (uint32_t)isrIrq96, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[97], (uint32_t)isrIrq97, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[98], (uint32_t)isrIrq98, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[99], (uint32_t)isrIrq99, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[100], (uint32_t)isrIrq100, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[101], (uint32_t)isrIrq101, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[102], (uint32_t)isrIrq102, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[103], (uint32_t)isrIrq103, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[104], (uint32_t)isrIrq104, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[105], (uint32_t)isrIrq105, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[106], (uint32_t)isrIrq106, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[107], (uint32_t)isrIrq107, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[108], (uint32_t)isrIrq108, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[109], (uint32_t)isrIrq109, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[110], (uint32_t)isrIrq110, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[111], (uint32_t)isrIrq111, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[112], (uint32_t)isrIrq112, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[113], (uint32_t)isrIrq113, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[114], (uint32_t)isrIrq114, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[115], (uint32_t)isrIrq115, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[116], (uint32_t)isrIrq116, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[117], (uint32_t)isrIrq117, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[118], (uint32_t)isrIrq118, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[119], (uint32_t)isrIrq119, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[120], (uint32_t)isrIrq120, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[121], (uint32_t)isrIrq121, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[122], (uint32_t)isrIrq122, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[123], (uint32_t)isrIrq123, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[124], (uint32_t)isrIrq124, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[125], (uint32_t)isrIrq125, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[126], (uint32_t)isrIrq126, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[127], (uint32_t)isrIrq127, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[128], (uint32_t)isrIrq128, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[129], (uint32_t)isrIrq129, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[130], (uint32_t)isrIrq130, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[131], (uint32_t)isrIrq131, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[132], (uint32_t)isrIrq132, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[133], (uint32_t)isrIrq133, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[134], (uint32_t)isrIrq134, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[135], (uint32_t)isrIrq135, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[136], (uint32_t)isrIrq136, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[137], (uint32_t)isrIrq137, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[138], (uint32_t)isrIrq138, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[139], (uint32_t)isrIrq139, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[140], (uint32_t)isrIrq140, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[141], (uint32_t)isrIrq141, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[142], (uint32_t)isrIrq142, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[143], (uint32_t)isrIrq143, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[144], (uint32_t)isrIrq144, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[145], (uint32_t)isrIrq145, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[146], (uint32_t)isrIrq146, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[147], (uint32_t)isrIrq147, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[148], (uint32_t)isrIrq148, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[149], (uint32_t)isrIrq149, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[150], (uint32_t)isrIrq150, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[151], (uint32_t)isrIrq151, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[152], (uint32_t)isrIrq152, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[153], (uint32_t)isrIrq153, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[154], (uint32_t)isrIrq154, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[155], (uint32_t)isrIrq155, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[156], (uint32_t)isrIrq156, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[157], (uint32_t)isrIrq157, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[158], (uint32_t)isrIrq158, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[159], (uint32_t)isrIrq159, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[160], (uint32_t)isrIrq160, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[161], (uint32_t)isrIrq161, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[162], (uint32_t)isrIrq162, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[163], (uint32_t)isrIrq163, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[164], (uint32_t)isrIrq164, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[165], (uint32_t)isrIrq165, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[166], (uint32_t)isrIrq166, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[167], (uint32_t)isrIrq167, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[168], (uint32_t)isrIrq168, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[169], (uint32_t)isrIrq169, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[170], (uint32_t)isrIrq170, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[171], (uint32_t)isrIrq171, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[172], (uint32_t)isrIrq172, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[173], (uint32_t)isrIrq173, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[174], (uint32_t)isrIrq174, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[175], (uint32_t)isrIrq175, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[176], (uint32_t)isrIrq176, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[177], (uint32_t)isrIrq177, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[178], (uint32_t)isrIrq178, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[179], (uint32_t)isrIrq179, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[180], (uint32_t)isrIrq180, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[181], (uint32_t)isrIrq181, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[182], (uint32_t)isrIrq182, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[183], (uint32_t)isrIrq183, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[184], (uint32_t)isrIrq184, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[185], (uint32_t)isrIrq185, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[186], (uint32_t)isrIrq186, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[187], (uint32_t)isrIrq187, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[188], (uint32_t)isrIrq188, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[189], (uint32_t)isrIrq189, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[190], (uint32_t)isrIrq190, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[191], (uint32_t)isrIrq191, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[192], (uint32_t)isrIrq192, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[193], (uint32_t)isrIrq193, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[194], (uint32_t)isrIrq194, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[195], (uint32_t)isrIrq195, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[196], (uint32_t)isrIrq196, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[197], (uint32_t)isrIrq197, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[198], (uint32_t)isrIrq198, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[199], (uint32_t)isrIrq199, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[200], (uint32_t)isrIrq200, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[201], (uint32_t)isrIrq201, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[202], (uint32_t)isrIrq202, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[203], (uint32_t)isrIrq203, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[204], (uint32_t)isrIrq204, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[205], (uint32_t)isrIrq205, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[206], (uint32_t)isrIrq206, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[207], (uint32_t)isrIrq207, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[208], (uint32_t)isrIrq208, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[209], (uint32_t)isrIrq209, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[210], (uint32_t)isrIrq210, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[211], (uint32_t)isrIrq211, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[212], (uint32_t)isrIrq212, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[213], (uint32_t)isrIrq213, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[214], (uint32_t)isrIrq214, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[215], (uint32_t)isrIrq215, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[216], (uint32_t)isrIrq216, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[217], (uint32_t)isrIrq217, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[218], (uint32_t)isrIrq218, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[219], (uint32_t)isrIrq219, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[220], (uint32_t)isrIrq220, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[221], (uint32_t)isrIrq221, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[222], (uint32_t)isrIrq222, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[223], (uint32_t)isrIrq223, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[224], (uint32_t)isrIrq224, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[225], (uint32_t)isrIrq225, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[226], (uint32_t)isrIrq226, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[227], (uint32_t)isrIrq227, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[228], (uint32_t)isrIrq228, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[229], (uint32_t)isrIrq229, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[230], (uint32_t)isrIrq230, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[231], (uint32_t)isrIrq231, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[232], (uint32_t)isrIrq232, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[233], (uint32_t)isrIrq233, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[234], (uint32_t)isrIrq234, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[235], (uint32_t)isrIrq235, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[236], (uint32_t)isrIrq236, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[237], (uint32_t)isrIrq237, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[238], (uint32_t)isrIrq238, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[239], (uint32_t)isrIrq239, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[240], (uint32_t)isrIrq240, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[241], (uint32_t)isrIrq241, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[242], (uint32_t)isrIrq242, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[243], (uint32_t)isrIrq243, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[244], (uint32_t)isrIrq244, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[245], (uint32_t)isrIrq245, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[246], (uint32_t)isrIrq246, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[247], (uint32_t)isrIrq247, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[248], (uint32_t)isrIrq248, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[249], (uint32_t)isrIrq249, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[250], (uint32_t)isrIrq250, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[251], (uint32_t)isrIrq251, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[252], (uint32_t)isrIrq252, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[253], (uint32_t)isrIrq253, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[254], (uint32_t)isrIrq254, 0x08, C_INTERRUPT_GATE);
    idtInitEntry(&s_idt[255], (uint32_t)isrIrq255, 0x08, C_INTERRUPT_GATE);
    
    lidt(s_idt, sizeof(s_idt) - 1UL);
}

static void idtInitEntry(
    struct ts_idtEntry *p_entry,
    uint32_t p_offset,
    uint16_t p_segment,
    uint8_t p_gateType
) {
    p_entry->m_offsetLow = (uint16_t)p_offset;
    p_entry->m_segment = p_segment;
    p_entry->m_reserved = 0;
    p_entry->m_gateType = p_gateType;
    p_entry->m_zero = 0;
    p_entry->m_dpl = 0;
    p_entry->m_present = 1;
    p_entry->m_offsetHigh = (uint16_t)(p_offset >> 16U);
}
